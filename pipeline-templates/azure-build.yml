stages:
- stage: Build
  displayName: Build Solutions  
  jobs:
    - job: Build
      displayName: Build
      steps:
      - task: NuGetToolInstaller@1
      - task: NuGetAuthenticate@1
      - task: NuGetCommand@2
        inputs:
         command: 'restore'
         restoreSolution: '$(solution)'
         feedsToUse: 'config'
         nugetConfigPath: 'nuget.config'   
      - task: MSBuild@1
        inputs:
         solution: '$(solution)'
         msbuildArgs: '/p:DeployOnBuild=true /p:WebPublishMethod=Package /p:PackageAsSingleFile=true /p:SkipInvalidConfigurations=true /p:PackageLocation="$(build.artifactStagingDirectory)"'
      #- task: VSTest@2
        #inputs:
          #platform: '$(buildPlatform)'
          #configuration: '$(buildConfiguration)'
      #- task: CopyFiles@2
       # inputs:
         #Contents: '**\bin\$(buildConfiguration)\**'
         #TargetFolder: '$(Build.ArtifactStagingDirectory)'      
      - task: PublishBuildArtifacts@1
        inputs:
         PathtoPublish: '$(Build.ArtifactStagingDirectory)'
         ArtifactName: 'drop'
         publishLocation: 'Container'
