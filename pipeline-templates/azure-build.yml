stages:
- stage: Build
  displayName: Build and Test  
  jobs:
    - job: Build
      displayName: Build
      steps:
      - task: NuGetToolInstaller@1
      - task: NuGetAuthenticate@1
      - task: NuGetCommand@2
        inputs:
         command: 'restore'
         restoreSolution: '$(solution)'
         feedsToUse: 'config'
         nugetConfigPath: 'AzureNuget.config'   
      - task: VSBuild@1
        inputs:
         solution: '$(solution)'
         msbuildArgs: '/p:DeployOnBuild=true /p:WebPublishMethod=Package /p:PackageAsSingleFile=true /p:SkipInvalidConfigurations=true /p:PackageLocation="$(build.artifactStagingDirectory)"'
      #- task: VSTest@2
        #inputs:
          #platform: '$(buildPlatform)'
          #configuration: '$(buildConfiguration)'             
      - task: PublishBuildArtifacts@1
        inputs:
         PathtoPublish: '$(build.artifactStagingDirectory)/Content/C_C/agent-ic-admin-dev/_work/2/s/HM.Operations.Secure.Web/obj/Local/Package/PackageTmp'
         ArtifactName: 'drop'
         publishLocation: 'Container'