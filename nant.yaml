
pool:
  vmImage: 'windows-latest'

steps:
  - task: UseDotNet@2
    displayName: 'Install .NET Core SDK'
    inputs:
      version: 8.x
      performMultiLevelLookup: true
      includePreviewVersions: true

  - task: PowerShell@2
    displayName: 'Download NAnt'
    inputs:
      targetType: 'inline'
      script: |
        # Download NAnt ZIP file
        Invoke-WebRequest -Uri 'https://sourceforge.net/projects/nant/files/latest/download' -OutFile 'nant.zip'

  - task: PowerShell@2
    displayName: 'Extract NAnt'
    inputs:
      targetType: 'inline'
      script: |
        # Extract NAnt to a folder
        Expand-Archive -Path 'nant.zip' -DestinationPath '$(Agent.ToolsDirectory)\Nant'
        Remove-Item -Path 'nant.zip' -Force

  - task: PowerShell@2
    displayName: 'Add NAnt to PATH'
    inputs:
      targetType: 'inline'
      script: |
        # Add NAnt to system PATH
        $env:PATH += ';$(Agent.ToolsDirectory)\Nant\bin'
        Write-Host 'NAnt installed successfully.'

